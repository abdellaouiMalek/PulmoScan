<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>{% block title %}PulmoScan - Dashboard{% endblock %}</title>
  <meta name="description" content="PulmoScan - Advanced lung cancer detection and classification system">
  <meta name="keywords" content="lung cancer, medical, healthcare, CT scan, classification">

  <!-- Favicons -->
  <link href="{% static 'img/favicon.png' %}" rel="icon">
  <link href="{% static 'img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet">

  <!-- Main CSS Files -->
  <link href="{% static 'css/main.css' %}" rel="stylesheet">
  <link href="{% static 'css/dashboard.css' %}" rel="stylesheet">

  {% block dashboard_css %}{% endblock %}
</head>

<body class="dashboard-page">
  <div class="dashboard-wrapper">
    <!-- Sidebar Toggle Button (Mobile) -->
    <button class="sidebar-toggle" id="sidebarToggle">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <!-- Sidebar top spacing -->
      <div class="sidebar-top-space"></div>

      <div class="sidebar-user">
        <img src="https://ui-avatars.com/api/?name={{ request.user.get_full_name|default:request.user.username }}&background=3fbbc0&color=fff" alt="User Profile">
        <h4>{{ request.user.get_full_name|default:request.user.username }}</h4>
        <p>{{ request.user.email }}</p>
      </div>

      <ul class="sidebar-menu">
        <li>
          <a href="{% url 'dashboard' %}" class="{% if request.path == '/dashboard/' %}active{% endif %}">
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
        </li>
        <li>
          <a href="{% url 'cancer_stage_dashboard' %}" class="{% if request.path == '/cancer_stage/' %}active{% endif %}">
            <i class="fas fa-lungs"></i> Cancer Stage
          </a>
        </li>
        <li>
          <a href="{% url 'cancer_type_dashboard' %}" class="{% if request.path == '/cancer_type/' %}active{% endif %}">
            <i class="fas fa-dna"></i> Cancer Type
          </a>
        </li>
        <li>
          <a href="{% url 'dashboardClassification' %}" class="{% if request.path == '/dashboardClassification/' %}active{% endif %}">
            <i class="fas fa-microscope"></i> Cancer Classification
          </a>
        </li>
        <li>
          <a href="{% url 'cancer_detection_dashboard' %}" class="{% if request.path == '/cancer_detection/' %}active{% endif %}">
            <i class="fas fa-search-plus"></i> Cancer Detection
          </a>
        </li>
        <li>
          <a href="{% url 'results' %}" class="{% if request.path == '/results/' %}active{% endif %}">
            <i class="fas fa-list-alt"></i> Results History
          </a>
        </li>
        <li class="has-submenu">
          <a href="#" class="submenu-toggle">
            <i class="fas fa-hospital-user"></i> Patient Dashboard
          </a>
          <ul class="submenu">
            <li>
              <a href="#">
                <i class="fas fa-user-injured"></i> Patient List
              </a>
            </li>
            <li>
              <a href="#">
                <i class="fas fa-notes-medical"></i> Medical Records
              </a>
            </li>
          </ul>
        </li>
        <li class="has-submenu">
          <a href="#" class="submenu-toggle">
            <i class="fas fa-user-md"></i> Doctor Dashboard
          </a>
          <ul class="submenu">
            <li>
              <a href="#">
                <i class="fas fa-calendar-check"></i> Appointments
              </a>
            </li>
            <li>
              <a href="#">
                <i class="fas fa-procedures"></i> Patient Management
              </a>
            </li>
          </ul>
        </li>
        <li class="has-submenu">
          <a href="#" class="submenu-toggle">
            <i class="fas fa-hospital"></i> Hospital Dashboard
          </a>
          <ul class="submenu">
            <li>
              <a href="#">
                <i class="fas fa-bed"></i> Bed Management
              </a>
            </li>
            <li>
              <a href="#">
                <i class="fas fa-pills"></i> Pharmacy
              </a>
            </li>
          </ul>
        </li>
        <li>
          <a href="{% url 'profile' %}">
            <i class="fas fa-user-cog"></i> Profile Settings
          </a>
        </li>
        <li>
          <a href="{% url 'home' %}">
            <i class="fas fa-home"></i> Back to Home
          </a>
        </li>
        <li>
          <a href="{% url 'logout' %}">
            <i class="fas fa-sign-out-alt"></i> Logout
          </a>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
      <div class="top-navbar">
        <div class="container-fluid">
          <div class="row">
            <div class="col-md-6">
              <h1 class="page-title">{% block page_title %}Dashboard{% endblock %}</h1>
            </div>
            <div class="col-md-6 text-end">
              <div class="user-dropdown dropdown">
                <a class="dropdown-toggle" href="#" role="button" id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                  <img src="https://ui-avatars.com/api/?name={{ request.user.get_full_name|default:request.user.username }}&background=3fbbc0&color=fff" alt="User" class="user-avatar">
                  <span>{{ request.user.get_full_name|default:request.user.username }}</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                  <li><a class="dropdown-item" href="{% url 'profile' %}"><i class="fas fa-user-circle me-2"></i> Profile</a></li>
                  <li><a class="dropdown-item" href="{% url 'home' %}"><i class="fas fa-home me-2"></i> Home</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="{% url 'logout' %}"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="content-wrapper">
        <div class="container-fluid">
          {% block dashboard_content %}{% endblock %}
        </div>
      </div>
    </div>
  </div>

  <!-- Vendor JS Files -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'js/main.js' %}"></script>

  <!-- Dashboard JS -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Sidebar Toggle (Mobile)
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebar = document.getElementById('sidebar');
      const mainContent = document.getElementById('mainContent');

      if (sidebarToggle) {
        sidebarToggle.addEventListener('click', function() {
          sidebar.classList.toggle('active');
          mainContent.classList.toggle('active');
        });
      }

      // Submenu Toggle
      const submenuToggles = document.querySelectorAll('.submenu-toggle');

      submenuToggles.forEach(toggle => {
        toggle.addEventListener('click', function(e) {
          e.preventDefault();
          const parent = this.parentElement;
          parent.classList.toggle('open');
          const submenu = parent.querySelector('.submenu');
          submenu.classList.toggle('show');
        });
      });
    });
  </script>

  {% block dashboard_js %}{% endblock %}
</body>
</html>
